<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!--Bootstrap em si-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous" />

    <!--Icones bootstrap-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css" />

    <!--Css com algumas utilidades-->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/utils.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='favicon/favicon.ico') }}">

    <title>Logs - Unblocker</title>
</head>

<body>





    <main class="d-flex justify-content-center align-items-center vw-100 h-100 position-absolute top-0 start-0">
        <div class="d-flex flex-column w-75 h-75 justify-content-center">
            <header class="d-flex justify-content-center">
                <h1>Lista de Logs <i class="bi bi-clock-history"></i></h1>
            </header>
            <div class="d-flex h-auto overflow-auto mh-75 flex-column align-items-center">
                <button type="button" class="btn btn-primary float-end" data-bs-toggle="modal" data-bs-target="#exampleModal">
                Filtro <i class="bi bi-funnel-fill"></i>
                </button>
                
                <table class="table">

                    <thead>
                        <tr>
                            <th scope="col">Data e Hora</th>
                            <th scope="col">Usu√°rio</th>
                            <th scope="col">Pagina</th>
                            <th scope="col">Mensagem</th>
                        </tr>
                    </thead>

                    <tbody>

                        {% for log in log_list %}
                        <tr>
                            <td scope="col" class="align-middle">
                                {{ log['datetime'] }}
                            </td>
                            <td scope="col" class="align-middle">
                                {{ log['username'] }}
                            </td>

                            <td scope="col">
                                {{ log['page'] }}
                            </td>

                            <td scope="col">
                                {{ log['message'] }}
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>

        <div class="vstack gap-2 position-fixed bottom-0 end-0 me-2 mb-2">

            <!--Voltar-->
            <a href="/configuration"
                class="bg-primary text-white d-flex justify-content-center align-items-center rounded side-button"
                title="Voltar">
                <i class="bi bi-arrow-return-left fs-1 justify-content-center align-items-center"></i>
            </a>

            <!--Pagina Inicial-->
            <a href="/"
                class="bg-primary text-white d-flex justify-content-center align-items-center rounded  side-button"
                title="Inicio">
                <i class="bi bi-house fs-1"></i>
            </a>

        </div>

    </main>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q"
        crossorigin="anonymous"></script>

          

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel">Modal title</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form action="/logs" method="POST">
            <label for="data_start" class="form-label">Data Inicial:</label>
            <input type="date" class="form-control" name="date_start" id="data_start"  value="{{date_input['date_start_str']}}"/>
            <label for="data_final" class="form-label">Data Final:</label>
            <input type="date" class="form-control" name="date_end" id="data_end" value="{{date_input['date_end_str']}}"/>
            <input type="submit" value="Filtrar" class="btn btn-info mt-2 float-start">
            <input type="reset" value="Limpar" class="btn btn-danger mt-2 float-start">
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
      </div>
    </div>
  </div>
</div>
<script>

    document.forms[0].onreset = function(e) {
        e.preventDefault();
        document.forms[0].date_start.value='';
        document.forms[0].date_end.value='';
    }
</script>



</body>

</html>